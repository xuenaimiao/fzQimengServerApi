# qimengå…½åœˆé˜²éª—QQæŸ¥è¯¢API

> **å£°æ˜ï¼šæœ¬é¡¹ç›®éqimengå…½åœˆå®˜æ–¹é¡¹ç›®ï¼Œä»…ä¸ºç¬¬ä¸‰æ–¹çˆ¬è™«æ¥å£æœåŠ¡ï¼Œä¸qimengå®˜æ–¹æ— å…³ã€‚**

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Java](https://img.shields.io/badge/Java-17%2B-orange)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4.4-brightgreen)

qimengå…½åœˆé˜²éª—QQæŸ¥è¯¢APIæ˜¯ä¸€ä¸ªç”¨äºæŸ¥è¯¢QQè´¦å·äº‘é»‘/é¿é›·ä¿¡æ¯çš„æ¥å£æœåŠ¡ï¼ŒåŸºäºJavaçˆ¬è™«æŠ€æœ¯å¼€å‘ï¼Œæä¾›äº†ç®€å•æ˜“ç”¨çš„RESTful APIï¼Œæ”¯æŒå•ä¸ªQQæŸ¥è¯¢å’Œæ‰¹é‡QQæŸ¥è¯¢åŠŸèƒ½ã€‚

## ğŸ“‘ ç›®å½•

- [åŠŸèƒ½ç‰¹ç‚¹](#åŠŸèƒ½ç‰¹ç‚¹)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
  - [é¢„æ„å»ºç‰ˆæœ¬](#é¢„æ„å»ºç‰ˆæœ¬)
  - [ä»æºç æ„å»º](#ä»æºç æ„å»º)
- [æ¥å£è¯´æ˜](#æ¥å£è¯´æ˜)
  - [å•ä¸ªQQæŸ¥è¯¢](#1-å•ä¸ªqqæŸ¥è¯¢)
  - [æ‰¹é‡QQæŸ¥è¯¢](#2-æ‰¹é‡qqæŸ¥è¯¢)
- [QQæœºå™¨äººå¯¹æ¥](#qqæœºå™¨äººå¯¹æ¥)
  - [å®˜æ–¹æœºå™¨äººæ¡†æ¶](#å®˜æ–¹æœºå™¨äººæ¡†æ¶)
  - [ç¬¬ä¸‰æ–¹æœºå™¨äººæ¡†æ¶](#ç¬¬ä¸‰æ–¹æœºå™¨äººæ¡†æ¶)
- [çŠ¶æ€ç è¯´æ˜](#çŠ¶æ€ç è¯´æ˜)
- [éƒ¨ç½²è¯´æ˜](#éƒ¨ç½²è¯´æ˜)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [è®¸å¯è¯](#è®¸å¯è¯)

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ” **å•ä¸ªQQå·æŸ¥è¯¢**ï¼šæŸ¥è¯¢æŒ‡å®šQQå·çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬è´¦å·çŠ¶æ€ã€è®¤è¯æƒ…å†µç­‰
- ğŸ“‹ **æ‰¹é‡QQå·æŸ¥è¯¢**ï¼šä¸€æ¬¡æŸ¥è¯¢å¤šä¸ªQQå·çš„çŠ¶æ€ä¿¡æ¯ï¼Œé«˜æ•ˆå¤„ç†å¤§é‡æ•°æ®
- ğŸ“Š **ç»“æ„åŒ–JSONå“åº”**ï¼šè¿”å›æ ‡å‡†æ ¼å¼çš„JSONæ•°æ®ï¼Œæ–¹ä¾¿å„ç±»åº”ç”¨é›†æˆ
- âš¡ **ä½å»¶è¿Ÿé«˜æ•ˆç‡**ï¼šä¼˜åŒ–çš„ç½‘ç»œè¯·æ±‚å’Œè§£æé€»è¾‘ï¼Œå¿«é€Ÿå“åº”æŸ¥è¯¢è¯·æ±‚
- ğŸ›¡ï¸ **ç¨³å®šå¯é **ï¼šè‡ªåŠ¨å¤„ç†å„ç§å¼‚å¸¸æƒ…å†µï¼Œæä¾›å¯é çš„æœåŠ¡ä½“éªŒ
- ğŸ¤– **QQæœºå™¨äººé›†æˆ**ï¼šæ”¯æŒä¸QQæœºå™¨äººæ¡†æ¶å¯¹æ¥ï¼Œå®ç°è‡ªåŠ¨æŸ¥è¯¢å“åº”

## ğŸš€ å¿«é€Ÿå¼€å§‹

### é¢„æ„å»ºç‰ˆæœ¬

ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬æä¾›äº†é¢„æ„å»ºçš„å¯æ‰§è¡ŒJARæ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ç›´æ¥ä¸‹è½½å¹¶è¿è¡Œï¼š

1. è®¿é—® [GitHub Releases](https://github.com/xuenaimiao/fzQimengServerApi/releases/tag/v0.0.1) ä¸‹è½½æœ€æ–°ç‰ˆæœ¬

2. ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²å®‰è£… Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬

3. è¿è¡ŒJARæ–‡ä»¶
```bash
java -jar qimengApi-0.0.1-SNAPSHOT.jar
```

### ä»æºç æ„å»º

å¦‚æœæ‚¨æƒ³è‡ªå·±æ„å»ºé¡¹ç›®ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/yourusername/qimengApi.git
cd qimengApi
```

2. ç¼–è¯‘æ‰“åŒ…
```bash
mvn clean package
```

3. è¿è¡ŒæœåŠ¡
```bash
java -jar target/qimengApi-0.0.1-SNAPSHOT.jar
```

4. æµ‹è¯•API
```bash
# å•ä¸ªæŸ¥è¯¢æµ‹è¯•
curl -X POST "http://localhost:8124/api/qimeng/query" -d "account=123456789"

# æ‰¹é‡æŸ¥è¯¢æµ‹è¯•
curl -X POST "http://localhost:8124/api/qimeng/batchQuery" -d "accounts=123456789,987654321"
```

## ğŸ“– æ¥å£è¯´æ˜

### 1. å•ä¸ªQQæŸ¥è¯¢

**è¯·æ±‚æ–¹å¼**: POST

**æ¥å£åœ°å€**: `/api/qimeng/query`

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
| ------ | ---- | ---- | ---- |
| account | String | æ˜¯ | éœ€è¦æŸ¥è¯¢çš„QQå·ç  |

**å“åº”å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜ |
| ------ | ---- | ---- |
| code | Integer | çŠ¶æ€ç ï¼Œ200è¡¨ç¤ºæˆåŠŸ |
| message | String | å“åº”æ¶ˆæ¯ |
| data | Object | æŸ¥è¯¢ç»“æœæ•°æ® |

**dataå­—æ®µè¯´æ˜**:

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
| ------ | ---- | ---- |
| account | String | æŸ¥è¯¢çš„QQå· |
| status | String | è´¦å·çŠ¶æ€ï¼šäº‘é»‘/é¿é›·/å®‰å…¨ |
| warning | String | è­¦å‘Šä¿¡æ¯ |
| teacher | String | ç™»è®°è€å¸ˆ |
| level | String | äº‘é»‘ç­‰çº§/é¿é›·ç­‰çº§ |
| blackTime | String | ä¸Šé»‘æ—¶é—´/é¿é›·æ—¶é—´ |
| reason | String | äº‘é»‘åŸå› /é¿é›·åŸå›  |
| trustLevel | String | å¯ä¿¡åº¦ |
| registerTime | String | æ³¨å†Œæ—¶é—´ |
| lastLoginTime | String | ä¸Šæ¬¡ç™»å½•æ—¶é—´ |
| rating | String | è¯„çº§ |
| phoneAuth | String | æ‰‹æœºè®¤è¯çŠ¶æ€ |
| realNameAuth | String | å®åè®¤è¯çŠ¶æ€ |
| wechatAuth | String | å¾®ä¿¡è®¤è¯çŠ¶æ€ |
| alipayAuth | String | æ”¯ä»˜å®è®¤è¯çŠ¶æ€ |
| groupCount | String | æ‰€åœ¨ç¾¤æ•° |
| monthlyActivity | String | æœ¬æœˆæ´»è·ƒ |
| totalActivity | String | æ€»è®¡æ´»è·ƒ |
| firstActive | String | é¦–æ¬¡æ´»è·ƒæ—¶é—´ |
| lastActive | String | æœ€åæ´»è·ƒæ—¶é—´ |
| templateCount | String | æ‰“æ ‡æ¨¡æ¿æ•°é‡ |
| score | String | è´¦å·åŒ…è£¹ç§¯åˆ† |
| otherTags | String | å…¶ä»–æ ‡ç­¾ |

**è¯·æ±‚ç¤ºä¾‹**:

```bash
curl -X POST "http://localhost:8124/api/qimeng/query" -d "account=3045170045"
```

**å“åº”ç¤ºä¾‹**:

```json
{
    "code": 200,
    "data": {
        "account": "3045170045",
        "status": "äº‘é»‘",
        "warning": "è¯·ç«‹å³ç»ˆæ­¢äº¤æ˜“!",
        "teacher": "Smarté£æ§ç³»ç»Ÿ",
        "level": "4",
        "blackTime": "2024-10-10 19:48:24",
        "reason": "è¿½åŠ å°æ€ï¼šæ¶æ„ä»¥å·å…»å· SMART: æ–‡ä»¶å­˜å‚¨å¼‚å¸¸. å‰ç§‘: æ‹å–é€ƒå•",
        "trustLevel": "å®Œå…¨ä¸å¯ä¿¡ å®Œå…¨ä¸å¯ä¿¡",
        "registerTime": "è·ä»Š225å¤© [â–²è¯„çº§:Bâ–²]",
        "lastLoginTime": "2024-08-08 15:24:04",
        "rating": null,
        "phoneAuth": "â—ˆå·²è®¤è¯æ‰‹æœºâ—ˆ",
        "realNameAuth": "â—ˆå·²å®åè®¤è¯â—ˆ",
        "wechatAuth": "âœ˜æœªç»‘å®šå¾®ä¿¡âœ˜",
        "alipayAuth": "â—ˆå·²ç»‘å®šæ”¯ä»˜å®â—ˆ",
        "groupCount": "[ 2 [â–½è¯„çº§:Eâ–½] ]",
        "monthlyActivity": "[ 0 [â–½è¯„çº§:Eâ–½] ]",
        "totalActivity": "[ 18776 [â–£è¯„çº§:ğ˜¼â–£] ]",
        "firstActive": "[ 2023å¹´8æœˆ8æ—¥ è·ä»Š: 589å¤© ]",
        "lastActive": "[ ]",
        "templateCount": "[ 48ä¸ª ]",
        "score": "[ 1åˆ† ]",
        "otherTags": "[äº‘æ‰“æ ‡ä¹°æ–­]"
    },
    "message": "æŸ¥è¯¢æˆåŠŸ"
}
```

### 2. æ‰¹é‡QQæŸ¥è¯¢

**è¯·æ±‚æ–¹å¼**: POST

**æ¥å£åœ°å€**: `/api/qimeng/batchQuery`

**è¯·æ±‚å‚æ•°**:

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
| ------ | ---- | ---- | ---- |
| accounts | String | æ˜¯ | éœ€è¦æŸ¥è¯¢çš„QQå·ç åˆ—è¡¨ï¼Œä»¥é€—å·åˆ†éš” |

**å“åº”å‚æ•°**:

| å‚æ•°å | ç±»å‹ | è¯´æ˜                   |
| ------ | ---- |----------------------|
| code | Integer | çŠ¶æ€ç ï¼Œ200è¡¨ç¤ºæˆåŠŸ          |
| message | String | å“åº”æ¶ˆæ¯                 |
| data | Array | æŸ¥è¯¢ç»“æœæ•°æ®æ•°ç»„(ä»…è¿”å›äº‘é»‘/é¿é›·æ•°æ®) |

**dataæ•°ç»„ä¸­æ¯ä¸ªå¯¹è±¡çš„å­—æ®µè¯´æ˜**:

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
| ------ | ---- | ---- |
| account | String | æŸ¥è¯¢çš„QQå· |
| status | String | è´¦å·çŠ¶æ€ï¼šäº‘é»‘/é¿é›·/å®‰å…¨ |
| message | String | æ¶ˆæ¯ï¼ˆé”™è¯¯æƒ…å†µä¸‹ä½¿ç”¨ï¼‰ |

**è¯·æ±‚ç¤ºä¾‹**:

```bash
curl -X POST "http://localhost:8124/api/qimeng/batchQuery" -d "accounts=3045170045,123456789,3252436977"
```

**å“åº”ç¤ºä¾‹**:

```json
{
  "code": 200,
  "data": [
    {
      "account": "3045170045",
      "status": "äº‘é»‘",
      "message": null
    },
    {
      "account": "3252436977",
      "status": "é¿é›·",
      "message": null
    }
  ],
  "message": "æ‰¹é‡æŸ¥è¯¢æˆåŠŸ"
}
```

## ğŸ¤– QQæœºå™¨äººå¯¹æ¥

æœ¬APIå¯ä»¥è½»æ¾åœ°ä¸QQæœºå™¨äººæ¡†æ¶é›†æˆï¼Œè®©æ‚¨çš„QQæœºå™¨äººå…·å¤‡é˜²éª—æŸ¥è¯¢åŠŸèƒ½ã€‚é€šè¿‡ç®€å•çš„HTTPè¯·æ±‚ï¼Œæœºå™¨äººå¯ä»¥å®æ—¶æŸ¥è¯¢QQè´¦å·çš„äº‘é»‘/é¿é›·ä¿¡æ¯ï¼Œå¹¶è‡ªåŠ¨å›å¤æŸ¥è¯¢ç»“æœã€‚

### å®˜æ–¹æœºå™¨äººæ¡†æ¶

ä»¥ä¸‹æ˜¯ä½¿ç”¨QQå®˜æ–¹æœºå™¨äººæ¡†æ¶å¯¹æ¥çš„ç¤ºä¾‹ä»£ç ï¼š

```javascript
// ä½¿ç”¨Node.jsç¤ºä¾‹
const axios = require('axios');
const { createClient } = require('oicq'); // å®˜æ–¹QQæœºå™¨äººSDK

const client = createClient(BOT_QQ_NUMBER);
const API_URL = 'http://your-server-ip:8124/api/qimeng/query';

// ç›‘å¬ç§èŠæ¶ˆæ¯
client.on('message.private', async (event) => {
  const message = event.raw_message;
  
  // æ£€æµ‹æ˜¯å¦ä¸ºæŸ¥è¯¢å‘½ä»¤ï¼Œä¾‹å¦‚ "æŸ¥è¯¢ 123456789"
  if (message.startsWith('æŸ¥è¯¢ ')) {
    const qqNumber = message.split(' ')[1].trim();
    
    try {
      // è°ƒç”¨APIè¿›è¡ŒæŸ¥è¯¢
      const response = await axios.post(API_URL, `account=${qqNumber}`, {
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded'
        }
      });
      
      if (response.data.code === 200) {
        const data = response.data.data;
        let replyMsg = `QQ: ${data.account}\nçŠ¶æ€: ${data.status}\n`;
        
        if (data.status === 'äº‘é»‘') {
          replyMsg += `è­¦å‘Š: ${data.warning}\n`;
          replyMsg += `åŸå› : ${data.reason}\n`;
          replyMsg += `ä¸Šé»‘æ—¶é—´: ${data.blackTime}\n`;
        } else if (data.status === 'é¿é›·') {
          replyMsg += `æç¤º: ${data.warning}\n`;
          replyMsg += `åŸå› : ${data.reason}\n`;
        }
        
        // å‘é€æŸ¥è¯¢ç»“æœ
        event.reply(replyMsg);
      } else {
        event.reply('æŸ¥è¯¢å¤±è´¥ï¼Œè¯·ç¨åå†è¯•');
      }
    } catch (error) {
      event.reply('æŸ¥è¯¢æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åå†è¯•');
    }
  }
});

client.login('password'); // æœºå™¨äººç™»å½•
```

### ç¬¬ä¸‰æ–¹æœºå™¨äººæ¡†æ¶

åŸºäºOneBot11æ ‡å‡†çš„ç¬¬ä¸‰æ–¹æœºå™¨äººæ¡†æ¶ä¹Ÿå¯ä»¥è½»æ¾é›†æˆæœ¬API

## ğŸ”¢ çŠ¶æ€ç è¯´æ˜

| çŠ¶æ€ç  | è¯´æ˜ |
| ------ | ---- |
| 200 | è¯·æ±‚æˆåŠŸ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

## ğŸ”§ éƒ¨ç½²è¯´æ˜

1. ç¡®ä¿å·²å®‰è£…Java 17æˆ–æ›´é«˜ç‰ˆæœ¬
2. å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°
3. æ‰“åŒ…é¡¹ç›®ï¼š`mvn clean package`
4. è¿è¡ŒjaråŒ…ï¼š`java -jar target/qimengApi-0.0.1-SNAPSHOT.jar`
5. æœåŠ¡é»˜è®¤å¯åŠ¨åœ¨8124ç«¯å£ï¼Œå¦‚éœ€ä¿®æ”¹ç«¯å£è¯·åœ¨`application.properties`æ–‡ä»¶ä¸­ä¿®æ”¹

### Dockeréƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

```bash
# æ„å»ºDockeré•œåƒ
docker build -t qimeng-api .

# è¿è¡Œå®¹å™¨
docker run -d -p 8124:8124 --name qimeng-api-container qimeng-api
```

## ğŸ’» æŠ€æœ¯æ ˆ

- **Spring Boot** 3.4.4 - ä¸»æ¡†æ¶
- **HtmlUnit** 4.2.0 - ç½‘é¡µæ¨¡æ‹Ÿä¸çˆ¬å–
- **Jsoup** 1.17.2 - HTMLè§£æ
- **Lombok** 1.18.30 - ä»£ç ç®€åŒ–å·¥å…·

## â“ å¸¸è§é—®é¢˜

**Q: æŸ¥è¯¢ç»“æœä¸å®˜ç½‘ä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ**  
A: æœ¬é¡¹ç›®é€šè¿‡çˆ¬è™«è·å–æ•°æ®ï¼Œå¯èƒ½å­˜åœ¨å»¶è¿Ÿã€‚å¦‚é‡é‡è¦å†³ç­–ï¼Œè¯·ä»¥å®˜æ–¹æŸ¥è¯¢ç»“æœä¸ºå‡†ã€‚

**Q: å¦‚ä½•æé«˜æŸ¥è¯¢é€Ÿåº¦ï¼Ÿ**  
A: å¯ä»¥è°ƒæ•´`QimengQueryUtil`ä¸­çš„è¶…æ—¶å‚æ•°ï¼Œä½†é™ä½è¶…æ—¶å¯èƒ½å¯¼è‡´æŸ¥è¯¢å¤±è´¥ç‡æé«˜ã€‚

**Q: å¦‚ä½•å¤„ç†æ‰¹é‡æŸ¥è¯¢æ—¶çš„å¤§é‡è¯·æ±‚ï¼Ÿ**  
A: å»ºè®®æ§åˆ¶å•æ¬¡æ‰¹é‡æŸ¥è¯¢çš„æ•°é‡ï¼Œé¿å…è¿‡å¤šè¯·æ±‚å¯¼è‡´IPè¢«é™åˆ¶ã€‚


## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦æƒ…è§LICENSEæ–‡ä»¶ã€‚ 